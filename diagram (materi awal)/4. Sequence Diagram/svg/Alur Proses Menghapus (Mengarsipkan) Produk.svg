<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="685px" preserveAspectRatio="none" style="width:1194px;height:685px;background:#FFFFFF;" version="1.1" viewBox="0 0 1194 685" width="1194px" zoomAndPan="magnify"><title>Alur Proses Menghapus (Mengarsipkan) Produk</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="376.6191" x="410.0688" y="27.9951">Alur Proses Menghapus (Mengarsipkan) Produk</text><g><title>main-app .PHP.</title><rect fill="#FFFFFF" height="444.7969" style="stroke:#181818;stroke-width:1;" width="10" x="522.6733" y="149.7266"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="236.125"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="368.7891"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="521.2578"/></g><rect fill="none" height="307.2656" style="stroke:#000000;stroke-width:1.5;" width="1177.7568" x="10" y="280.2578"/><g><title>User .Pemilik.Pegawai.</title><rect fill="#000000" fill-opacity="0.00000" height="485.9297" width="8" x="99.4556" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="103" x2="103" y1="118.5938" y2="604.5234"/></g><g><title>main-app .PHP.</title><rect fill="#000000" fill-opacity="0.00000" height="485.9297" width="8" x="523.6733" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="527.0884" x2="527.0884" y1="118.5938" y2="604.5234"/></g><g><title>postgres-db</title><rect fill="#000000" fill-opacity="0.00000" height="485.9297" width="8" x="1128.9517" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1132.1465" x2="1132.1465" y1="118.5938" y2="604.5234"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9111" x="20" y="115.292">User (Pemilik/Pegawai)</text><ellipse cx="103.4556" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M103.4556,58.7969 L103.4556,85.7969 M90.4556,66.7969 L116.4556,66.7969 M103.4556,85.7969 L90.4556,100.7969 M103.4556,85.7969 L116.4556,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.9111" x="20" y="616.5186">User (Pemilik/Pegawai)</text><ellipse cx="103.4556" cy="628.3203" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M103.4556,636.3203 L103.4556,663.3203 M90.4556,644.3203 L116.4556,644.3203 M103.4556,663.3203 L90.4556,678.3203 M103.4556,663.3203 L116.4556,678.3203" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1699" x="466.0884" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1699" x="473.0884" y="107.292">main-app (PHP)</text></g><g class="participant participant-tail" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1699" x="466.0884" y="603.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1699" x="473.0884" y="623.5186">main-app (PHP)</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6104" x="1088.1465" y="115.292">postgres-db</text><path d="M1114.9517,66.2969 C1114.9517,56.2969 1132.9517,56.2969 1132.9517,56.2969 C1132.9517,56.2969 1150.9517,56.2969 1150.9517,66.2969 L1150.9517,92.2969 C1150.9517,102.2969 1132.9517,102.2969 1132.9517,102.2969 C1132.9517,102.2969 1114.9517,102.2969 1114.9517,92.2969 L1114.9517,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1114.9517,66.2969 C1114.9517,76.2969 1132.9517,76.2969 1132.9517,76.2969 C1132.9517,76.2969 1150.9517,76.2969 1150.9517,66.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6104" x="1088.1465" y="616.5186">postgres-db</text><path d="M1114.9517,629.8203 C1114.9517,619.8203 1132.9517,619.8203 1132.9517,619.8203 C1132.9517,619.8203 1150.9517,619.8203 1150.9517,629.8203 L1150.9517,655.8203 C1150.9517,665.8203 1132.9517,665.8203 1132.9517,665.8203 C1132.9517,665.8203 1114.9517,665.8203 1114.9517,655.8203 L1114.9517,629.8203" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1114.9517,629.8203 C1114.9517,639.8203 1132.9517,639.8203 1132.9517,639.8203 C1132.9517,639.8203 1150.9517,639.8203 1150.9517,629.8203" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>main-app .PHP.</title><rect fill="#FFFFFF" height="444.7969" style="stroke:#181818;stroke-width:1;" width="10" x="522.6733" y="149.7266"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="236.125"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="368.7891"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1127.9517" y="521.2578"/></g><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#181818" points="510.6733,145.7266,520.6733,149.7266,510.6733,153.7266,514.6733,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4556" x2="516.6733" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.4922" x="110.4556" y="144.6606">1. POST /products/{id}/delete</text></g><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#181818;stroke-width:1;" x1="532.6733" x2="574.6733" y1="178.8594" y2="178.8594"/><line style="stroke:#181818;stroke-width:1;" x1="574.6733" x2="574.6733" y1="178.8594" y2="191.8594"/><line style="stroke:#181818;stroke-width:1;" x1="533.6733" x2="574.6733" y1="191.8594" y2="191.8594"/><polygon fill="#181818" points="543.6733,187.8594,533.6733,191.8594,543.6733,195.8594,539.6733,191.8594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.6162" x="539.6733" y="173.7935">2. Verifikasi sesi &amp; hak akses pengguna</text></g><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="1115.9517,232.125,1125.9517,236.125,1115.9517,240.125,1119.9517,236.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="532.6733" x2="1121.9517" y1="236.125" y2="236.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297.8257" x="539.6733" y="215.9263">3. Periksa apakah produk ada dalam pesanan</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="412.5342" x="539.6733" y="231.0591">SELECT COUNT(*) FROM order_items WHERE product_id = {id}</text></g><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="543.6733,261.2578,533.6733,265.2578,543.6733,269.2578,539.6733,265.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="537.6733" x2="1131.9517" y1="265.2578" y2="265.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.6704" x="549.6733" y="260.1919">4. Hasil (Jumlah pesanan)</text></g><path d="M10,280.2578 L74.4429,280.2578 L74.4429,287.3906 L64.4429,297.3906 L10,297.3906 L10,280.2578" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="307.2656" style="stroke:#000000;stroke-width:1.5;" width="1177.7568" x="10" y="280.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="293.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="375.9497" x="89.4429" y="292.4683">[jika produk TIDAK PERNAH ada dalam pesanan (Count = 0)]</text><path d="M537,302.3906 L537,327.3906 L839,327.3906 L839,312.3906 L829,302.3906 L537,302.3906" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M829,302.3906 L829,312.3906 L839,312.3906 L829,302.3906" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.0552" x="543" y="319.4575">Logika "Hard Delete" bisa dijalankan di sini</text><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="1115.9517,364.7891,1125.9517,368.7891,1115.9517,372.7891,1119.9517,368.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="532.6733" x2="1121.9517" y1="368.7891" y2="368.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233.3716" x="539.6733" y="348.5903">5a. Hapus produk secara permanen</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="413.9814" x="539.6733" y="363.7231">(DELETE FROM products, product_variants, product_images, ...)</text></g><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="543.6733,393.9219,533.6733,397.9219,543.6733,401.9219,539.6733,397.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="537.6733" x2="1131.9517" y1="397.9219" y2="397.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.3164" x="549.6733" y="392.856">6a. Konfirmasi penghapusan</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="114.4556,423.0547,104.4556,427.0547,114.4556,431.0547,110.4556,427.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4556" x2="521.6733" y1="427.0547" y2="427.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395.2178" x="120.4556" y="421.9888">7a. Response (Sukses: "Produk berhasil dihapus permanen")</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1187.7568" y1="436.0547" y2="436.0547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="334.356" x="15" y="446.2651">[jika produk PERNAH ada dalam pesanan (Count &gt; 0)]</text><path d="M537,454.8594 L537,479.8594 L907,479.8594 L907,464.8594 L897,454.8594 L537,454.8594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M897,454.8594 L897,464.8594 L907,464.8594 L897,454.8594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349.5654" x="543" y="471.9263">Logika "Soft Delete" dijalankan untuk menjaga histori</text><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="1115.9517,517.2578,1125.9517,521.2578,1115.9517,525.2578,1119.9517,521.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="532.6733" x2="1121.9517" y1="521.2578" y2="521.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.0981" x="539.6733" y="501.0591">5b. Arsipkan produk</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="576.2783" x="539.6733" y="516.1919">UPDATE products SET is_published = false, is_archived = true WHERE product_id = {id}</text></g><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="543.6733,546.3906,533.6733,550.3906,543.6733,554.3906,539.6733,550.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="537.6733" x2="1131.9517" y1="550.3906" y2="550.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.0801" x="549.6733" y="545.3247">6b. Konfirmasi pengarsipan</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="114.4556,575.5234,104.4556,579.5234,114.4556,583.5234,110.4556,579.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4556" x2="521.6733" y1="579.5234" y2="579.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340.8818" x="120.4556" y="574.4575">7b. Response (Sukses: "Produk berhasil diarsipkan")</text></g><!--SRC=[bLHDRvj04BtpAqOSMbp5kD-L8ZMI4wZSvWlPkBr4YWQpXWcmh7QNz53rltSMRCTM52NbW9RTdPatxxtXDKI4XSO6bhgpAA6JjgjWMdSQBeKiIbITWS0jKHjI5SeH9BhDkyhpBDbQ37TvomZpV0YkRAl1NngX8KX4GpLLaqGK-1jfv0CQS4UUGcrfHGgb1Rz1acDKYWDcoN1fgfINeyKCZG1VjSOMMfXndlMdqQddzHN69-uc7CEx49BhHGeJvN2ih9dyeVpl91UriCA1edkqea_hkOXTuFiGVWfDQwhG472B1A-Wn0gmSlqgRhBe9EwYebCE-i3LEAWo2AYmmXBwiXoK8-HOCzjA69GeR-GYleZFKZYxNbwbmPiHV9jVNqAhSw5loOh6mAzPF8zXW_kMSlWA3li3QDSjbntlC7yCOSPeQmX-T4tjgW_5Hbuk3gAmjd37dMtXfT-ZwJaayVngEdkC5OApbjt1zT-EFE2dVycMasagIWljUWFWeYrSLd-6EeUevzY7Z9YEdEuufMHBy18CINh8jC_W9tGzE1zje1cnGir0XMvG2kOjY9YuD1xusgfwjEFf7ZMnUVPsgC52y7SOXWFyVIhSzm67dnd0UIlNnFLOSxNrDSh-xY6HXormZjvyn_25ayo5KQrabmQBpbdc6FnX5Y0JkknbocaOcMrp_iZpHCqX-zeyfyh9YrLPj6kxKsLFa67o6o7li40eoV2aFYLF5i9qCziRW3TocKJJTETK0uiu1JAtgijgCgLmnbqZjtNaTb6lIhhlDwtkn9CkVrwex95G_L_d_uJANYZKzeVMIoHpRt-YEES_]--></g></svg>