<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="728px" preserveAspectRatio="none" style="width:1482px;height:728px;background:#FFFFFF;" version="1.1" viewBox="0 0 1482 728" width="1482px" zoomAndPan="magnify"><title>Alur Proses Pemilik Menghapus Akun Pegawai</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="365.5039" x="559.4956" y="27.9951">Alur Proses Pemilik Menghapus Akun Pegawai</text><g><title>main-app .PHP.</title><rect fill="#FFFFFF" height="488.0625" style="stroke:#181818;stroke-width:1;" width="10" x="616.5088" y="149.7266"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1091.7681" y="278.2578"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="94.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1091.7681" y="455.1875"/></g><rect fill="none" height="308.3984" style="stroke:#000000;stroke-width:1.5;" width="1465.4951" x="10" y="322.3906"/><g><title>User Pemilik</title><rect fill="#000000" fill-opacity="0.00000" height="529.1953" width="8" x="62.415" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="66" x2="66" y1="118.5938" y2="647.7891"/></g><g><title>main-app .PHP.</title><rect fill="#000000" fill-opacity="0.00000" height="529.1953" width="8" x="617.5088" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="620.9238" x2="620.9238" y1="118.5938" y2="647.7891"/></g><g><title>postgres-db</title><rect fill="#000000" fill-opacity="0.00000" height="529.1953" width="8" x="1092.7681" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1095.9629" x2="1095.9629" y1="118.5938" y2="647.7891"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.8301" x="20" y="115.292">User Pemilik</text><ellipse cx="66.415" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M66.415,58.7969 L66.415,85.7969 M53.415,66.7969 L79.415,66.7969 M66.415,85.7969 L53.415,100.7969 M66.415,85.7969 L79.415,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.8301" x="20" y="659.7842">User Pemilik</text><ellipse cx="66.415" cy="671.5859" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M66.415,679.5859 L66.415,706.5859 M53.415,687.5859 L79.415,687.5859 M66.415,706.5859 L53.415,721.5859 M66.415,706.5859 L79.415,721.5859" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1699" x="559.9238" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1699" x="566.9238" y="107.292">main-app (PHP)</text></g><g class="participant participant-tail" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1699" x="559.9238" y="646.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1699" x="566.9238" y="666.7842">main-app (PHP)</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6104" x="1051.9629" y="115.292">postgres-db</text><path d="M1078.7681,66.2969 C1078.7681,56.2969 1096.7681,56.2969 1096.7681,56.2969 C1096.7681,56.2969 1114.7681,56.2969 1114.7681,66.2969 L1114.7681,92.2969 C1114.7681,102.2969 1096.7681,102.2969 1096.7681,102.2969 C1096.7681,102.2969 1078.7681,102.2969 1078.7681,92.2969 L1078.7681,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1078.7681,66.2969 C1078.7681,76.2969 1096.7681,76.2969 1096.7681,76.2969 C1096.7681,76.2969 1114.7681,76.2969 1114.7681,66.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.6104" x="1051.9629" y="659.7842">postgres-db</text><path d="M1078.7681,673.0859 C1078.7681,663.0859 1096.7681,663.0859 1096.7681,663.0859 C1096.7681,663.0859 1114.7681,663.0859 1114.7681,673.0859 L1114.7681,699.0859 C1114.7681,709.0859 1096.7681,709.0859 1096.7681,709.0859 C1096.7681,709.0859 1078.7681,709.0859 1078.7681,699.0859 L1078.7681,673.0859" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1078.7681,673.0859 C1078.7681,683.0859 1096.7681,683.0859 1096.7681,683.0859 C1096.7681,683.0859 1114.7681,683.0859 1114.7681,673.0859" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>main-app .PHP.</title><rect fill="#FFFFFF" height="488.0625" style="stroke:#181818;stroke-width:1;" width="10" x="616.5088" y="149.7266"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1091.7681" y="278.2578"/></g><g><title>postgres-db</title><rect fill="#FFFFFF" height="94.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1091.7681" y="455.1875"/></g><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#181818" points="604.5088,145.7266,614.5088,149.7266,604.5088,153.7266,608.5088,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="66.415" x2="610.5088" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.3745" x="73.415" y="144.6606">1. POST /employees/{id}/delete</text></g><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#181818;stroke-width:1;" x1="626.5088" x2="668.5088" y1="178.8594" y2="178.8594"/><line style="stroke:#181818;stroke-width:1;" x1="668.5088" x2="668.5088" y1="178.8594" y2="191.8594"/><line style="stroke:#181818;stroke-width:1;" x1="627.5088" x2="668.5088" y1="191.8594" y2="191.8594"/><polygon fill="#181818" points="637.5088,187.8594,627.5088,191.8594,637.5088,195.8594,633.5088,191.8594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.8062" x="633.5088" y="173.7935">2. Verifikasi sesi &amp; hak akses User Pemilik</text></g><g class="message" data-participant-1="App" data-participant-2="App"><line style="stroke:#181818;stroke-width:1;" x1="626.5088" x2="668.5088" y1="220.9922" y2="220.9922"/><line style="stroke:#181818;stroke-width:1;" x1="668.5088" x2="668.5088" y1="220.9922" y2="233.9922"/><line style="stroke:#181818;stroke-width:1;" x1="627.5088" x2="668.5088" y1="233.9922" y2="233.9922"/><polygon fill="#181818" points="637.5088,229.9922,627.5088,233.9922,637.5088,237.9922,633.5088,233.9922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.5859" x="633.5088" y="215.9263">3. Ambil store_id dari sesi User Pemilik</text></g><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="1079.7681,274.2578,1089.7681,278.2578,1079.7681,282.2578,1083.7681,278.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="626.5088" x2="1085.7681" y1="278.2578" y2="278.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="392.3867" x="633.5088" y="258.0591">4. Verifikasi bahwa pegawai adalah bagian dari toko pemilik</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="446.2593" x="633.5088" y="273.1919">SELECT user_id FROM users WHERE user_id = {id} AND store_id = ?</text></g><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="637.5088,303.3906,627.5088,307.3906,637.5088,311.3906,633.5088,307.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="631.5088" x2="1095.7681" y1="307.3906" y2="307.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.3867" x="643.5088" y="302.3247">5. Hasil (user_id jika valid)</text></g><path d="M10,322.3906 L74.4429,322.3906 L74.4429,329.5234 L64.4429,339.5234 L10,339.5234 L10,322.3906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.3984" style="stroke:#000000;stroke-width:1.5;" width="1465.4951" x="10" y="322.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="335.4575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="239.5884" x="89.4429" y="334.6011">[jika pegawai adalah bagian dari toko]</text><path d="M631,344.5234 L631,384.5234 L1030,384.5234 L1030,354.5234 L1020,344.5234 L631,344.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1020,344.5234 L1020,354.5234 L1030,354.5234 L1020,344.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322.9941" x="637" y="361.5903">Aplikasi menampilkan konfirmasi kepada Pemilik:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378.0283" x="637" y="376.7231">"Anda yakin ingin menghapus pegawai [Nama Pegawai]?"</text><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#181818" points="604.5088,406.9219,614.5088,410.9219,604.5088,414.9219,608.5088,410.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="66.415" x2="610.5088" y1="410.9219" y2="410.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.3501" x="73.415" y="405.856">6. Konfirmasi penghapusan</text></g><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="1079.7681,451.1875,1089.7681,455.1875,1079.7681,459.1875,1083.7681,455.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="626.5088" x2="1085.7681" y1="455.1875" y2="455.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.0664" x="633.5088" y="434.9888">7. Hapus pengguna (pegawai)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.8232" x="633.5088" y="450.1216">DELETE FROM users WHERE user_id = {id}</text></g><path d="M1106,468.1875 L1106,523.1875 L1465,523.1875 L1465,478.1875 L1455,468.1875 L1106,468.1875" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1455,468.1875 L1455,478.1875 L1465,478.1875 L1455,468.1875" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="194.1748" x="1112" y="485.2544">CASCADE DELETE DIMULAI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250.8594" x="1112" y="500.3872">Database secara otomatis melakukan:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338.4951" x="1112" y="515.52">- DELETE FROM user_profiles WHERE user_id = {id}</text><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="637.5088,545.7188,627.5088,549.7188,637.5088,553.7188,633.5088,549.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="631.5088" x2="1095.7681" y1="549.7188" y2="549.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.2793" x="643.5088" y="544.6528">8. Konfirmasi penghapusan berhasil</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="77.415,574.8516,67.415,578.8516,77.415,582.8516,73.415,578.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="71.415" x2="615.5088" y1="578.8516" y2="578.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="475.5601" x="83.415" y="573.7856">9. Response (Redirect ke halaman daftar pegawai dengan pesan sukses)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1475.4951" y1="587.8516" y2="587.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="236.1187" x="15" y="598.062">[jika pegawai bukan bagian dari toko]</text><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="77.415,618.7891,67.415,622.7891,77.415,626.7891,73.415,622.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="71.415" x2="615.5088" y1="622.7891" y2="622.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="526.0938" x="83.415" y="617.7231">10. Response (Error: "Anda tidak memiliki izin untuk menghapus pengguna ini.")</text></g><!--SRC=[XLJPRjim47pdLopyqDe6xFG-3AI14hb8q1o6axGFJH6iBLhUYg88aagG5ltthYZ9iT8ZUX0WaZCxEplKKuW9KuivNDhIeuPI-pA3I9KMBfsqC9CvAShWHEfqZQPq46MbvkKKRv64yEILhC_FRE6aUnI1IrzOw6spzm1TA2SCMazBCgWzz78aFK9Ze3yxd0t2eSWOaQ371Je9FLCudrhfHiaYxCRxGWJUqOVg94pW-HXcP-SNi2DpeuexATtEJqf-xIHIIIyhBNI3NWPUKK4so1TZ-2mjhIX3Hy2D4Jo1DMQ0MTNbjlmkyEKOedn12XptAQyfWGHjmz11jR1udr6lEkKMkBv5CBLbW0agNFDYIZoXmEQBhE3zG7IbpwV7quCBA9czglTnVdOIFXnyEPpEfvkDNQYQX-WqlXUt2tltDh21h6QqwUNr60vPZu9-I_6T1S8DAae68f7RG87ArzkFw1R0JtZfWg6MqhM7OXLc0E69ZAfzoAN6t93A69yLUaKshvOpQPYxDNBIe7gHviKxp4W3wPJV-IQ2hQIlfvXZcyLlUxq0bJe9KaJuwWRepHW-tHSsBI7g-l3s2DzMPjN5T9gM6g7Vb1rSwPX7T35zR3I1isFgdpRnQjtlS7WGdHz4yHGQylZevF8uEXeEcmDnUr6SNA95A7oHeoV7lYZCIZQrjMu43_LT6rkiICd_wEpQridDkt-v1WjfrrMY0kP1W3Q6Ca-OmWJUZs4kdIaqTz6VouIiN7gUFzz4nPEiKhNoQ3VpJRWKhnfPrN9bTLK7GaZ5y4uq5rNtVq_c0mNFdsrBc5fRs4aJDKy9_m_oEeK4z8FQ_-Tsy9eiaAPnRo3ODB5zSRZQRm00]--></g></svg>